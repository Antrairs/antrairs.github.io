var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,r,c)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[r]=c,t=(e,a)=>{for(var r in a||(a={}))l.call(a,r)&&o(e,r,a[r]);if(c)for(var r of c(a))s.call(a,r)&&o(e,r,a[r]);return e},d=(e,c)=>a(e,r(c));import{f as n,l as i,V as m,T as p,p as f}from"./vendors.8d5e5efc.js";const h=[{modern:"\u65e5",oracle:"\u65e5"},{modern:"\u6708",oracle:"\u6708"},{modern:"\u5c71",oracle:"\u5c71"},{modern:"\u6c34",oracle:"\u6c34"},{modern:"\u706b",oracle:"\u706b"},{modern:"\u6728",oracle:"\u6728"},{modern:"\u4eba",oracle:"\u4eba"},{modern:"\u5927",oracle:"\u5927"},{modern:"\u5c0f",oracle:"\u5c0f"},{modern:"\u53e3",oracle:"\u53e3"},{modern:"\u7530",oracle:"\u7530"},{modern:"\u77f3",oracle:"\u77f3"},{modern:"\u7f8a",oracle:"\u7f8a"},{modern:"\u9a6c",oracle:"\u9a6c"},{modern:"\u725b",oracle:"\u725b"},{modern:"\u864e",oracle:"\u864e"}];function u(e){let a,r=e.length;while(0!==r)a=Math.floor(Math.random()*r),r--,[e[r],e[a]]=[e[a],e[r]];return e}const j=()=>{const[e,a]=n.useState([]),[r,c]=n.useState([]),[l,s]=n.useState({}),[o,j]=n.useState(0),[x,g]=n.useState(!1),[b,y]=n.useState(!1),N=n.useCallback((()=>{const e=h.slice(0,8),r=e.flatMap((e=>[{id:`modern-${e.modern}`,type:"modern",value:e.modern,matched:!1,flipped:!1},{id:`oracle-${e.oracle}`,type:"oracle",value:e.oracle,matched:!1,flipped:!1}]));a(u(r)),c([]),s({}),j(0),y(!1),g(!0)}),[]);n.useEffect((()=>{N()}),[N]),n.useEffect((()=>{Object.keys(l).length===2*h.slice(0,8).length&&y(!0)}),[l]);const v=l=>{if(2===r.length||l.matched||r.includes(l.id))return;j((e=>e+1));const o=[...r,l.id];if(c(o),a((e=>e.map((e=>e.id===l.id?d(t({},e),{flipped:!0}):e)))),2===o.length){const[r,l]=o,n=e.find((e=>e.id===r)),i=e.find((e=>e.id===l)),m=n.value===i.value&&n.type!==i.type;m?(s((e=>d(t({},e),{[n.id]:!0,[i.id]:!0}))),a((e=>e.map((e=>e.id===n.id||e.id===i.id?d(t({},e),{matched:!0,flipped:!0}):e)))),c([])):setTimeout((()=>{a((e=>e.map((e=>e.id===n.id||e.id===i.id?d(t({},e),{flipped:!1}):e)))),c([])}),1e3)}};return i.jsxs(m,{className:"oracle-game-container",children:[i.jsxs(m,{className:"game-header",children:[i.jsxs(m,{className:"game-info",children:[i.jsx(p,{className:"game-title",children:"\u7532\u9aa8\u6587\u8fde\u8fde\u770b"}),i.jsxs(p,{className:"game-moves",children:["\u6b65\u6570: ",o]})]}),i.jsx(f,{className:"reset-button",onClick:N,children:"\u91cd\u65b0\u5f00\u59cb"})]}),b&&i.jsxs(m,{className:"game-won-overlay",children:[i.jsx(p,{className:"game-won-text",children:"\u606d\u559c\u4f60\uff0c\u5168\u90e8\u5339\u914d\u6210\u529f\uff01"}),i.jsx(f,{className:"reset-button",onClick:N,children:"\u518d\u73a9\u4e00\u6b21"})]}),i.jsx(m,{className:"game-grid",children:e.map((e=>i.jsx(m,{className:`card ${e.flipped||e.matched?"flipped":""} ${e.matched?"matched":""}`,onClick:()=>v(e),children:i.jsxs(m,{className:"card-inner",children:[i.jsx(m,{className:"card-face card-back"}),i.jsx(m,{className:"card-face card-front",children:i.jsx(p,{className:"card-text "+("oracle"===e.type?"oracle-font":""),children:e.value})})]})},e.id)))})]})};export{j as default};
